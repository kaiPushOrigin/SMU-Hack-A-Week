
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  dir="ltr">
<head>	<title>Camera and Video Control with HTML5 Example</title>
	<meta name="description" content="Access the desktop camera and video using HTML, JavaScript, and Canvas.  The camera may be controlled using HTML5 and getUserMedia." />
	<!--[if lt IE 9]>
	<script src="/wp-content/themes/jack/js/lib/html5shiv/src/html5shiv.js?{{ themeVersion }}"></script>
<![endif]-->
<link rel="stylesheet" href="stylesheets/all.css" type="text/css" />
<style>
	
	nav .search {
		display: none;
	}

	.demoFrame header,
	.demoFrame .footer,
	.demoFrame h1,
	.demoFrame .p {
		display: none !important;
	}

	h1 {
		font-size: 2.6em;
	}

	h2, h3 {
		font-size: 1.7em;
	}

	.left {
		width: 920px !important;
		padding-bottom: 40px;
		min-height: auto !important;
		padding-right: 0;
		float: left;
	}

	div.p {
		font-size: .8em;
		font-family: arial;
		margin-top: -20px;
		font-style: italic;
		padding: 10px 0;
	}

	.footer {
		padding: 20px;
		margin: 20px 0 0 0;
		background: #f8f8f8;
		font-weight: bold;
		font-family: arial;
		border-top: 1px solid #ccc;
	}

	.left > p:first-of-type { 
		background: #ffd987; 
		font-style: italic; 
		padding: 5px 10px; 
		margin-bottom: 40px;
	}

	.demoAds {
		position: absolute;
		top: 0;
		right: 0;
		width: 270px;
		padding: 10px 0 0 10px;
		background: #f8f8f8;
	}
	.demoAds a {
		margin: 0 10px 10px 0 !important;
		display: inline-block !important;
	}

	#promoNode { 
		margin: 20px 0; 
	}

	@media only screen and (max-width : 1024px) {
		.left {
			float: none;
		}

		body .one .bsa_it_ad {
			position: relative !important;
		}
	}
</style>	<style>
		video { border: 1px solid #ccc; display: block; margin: 0 0 20px 0; }
		#canvas { margin-top: 20px; border: 1px solid #ccc; display: block; }
	</style>
</head>
<body>
<script>
var _gaq=[["_setAccount","UA-2087880-2"],["_trackPageview"]];
(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.async=1;
g.src=("https:"==location.protocol?"//ssl":"//www")+".google-analytics.com/ga.js";
s.parentNode.insertBefore(g,s)}(document,"script"));
</script>


<!-- Add the HTML header -->
<div id="page">

<a name="top" id="top"></a>

<!-- header -->
<header><div class="centerSite">

			<!-- top menu: dwb -->
	<nav role="navigation" class="dwb"><ul>
		<li class="home"><a href="/" accesskey="h"><span>David Walsh Blog</span></a></li>
		<li class="articles">
			<a href="/page/1" accesskey="a">articles</a>
			<div class="dropdown">
				<ul>
					<li><a href="/page/1">Latest Posts</a></li>
					<li><a href="/tutorials/features">Features</a></li>
					<li><a href="/tutorials/tips">Quick Tips</a></li>
					<li class="sep"></li>
					<li><a href="/tutorials/html5">HTML5</a></li>
					<li><a href="/tutorials/css/animations">CSS Animations</a></li>
					<li><a href="/tutorials/firefoxos">Firefox OS</a></li>
					<li><a href="/tutorials/jquery">jQuery</a></li>
					<li><a href="/tutorials/mootools">MooTools</a></li>
					<li><a href="/tutorials/php">PHP</a></li>
					<li class="sep"></li>
					<li><a href="/guest-post">Submit Guest Post</a></li>
				</ul>
			</div>
		</li>
		<li class="demos">
			<a href="/demos" accesskey="d">demos</a>
			<div class="dropdown">
				<ul>
					<li><a href="/demos">All Demos</a></li>
					<li><a href="/demos/jquery">jQuery Demos</a></li>
					<li><a href="/demos/mootools">MooTools Demos</a></li>
					<li><a href="/demos/css">CSS Demos</a></li>
					<li><a href="/demos/html5">HTML5 Demos</a></li>
				</ul>
			</div>
		</li>
		<li class="connect">
			<a href="/forums" accesskey="c">forums</a>
			<div class="dropdown">
				<ul>
					<li><a href="/forums/forum/mootools">MooTools 1.x</a></li>
					<li><a href="/forums/forum/mootools-2">MooTools 2</a></li>
					<li><a href="/forums/forum/css">CSS</a></li>
					<li><a href="/forums/forum/html5-mobile">HTML5 &amp; Mobile</a></li>
					<li><a href="/forums/forum/jquery">jQuery</a></li>
					<li><a href="/forums/forum/firefox-os">Firefox OS</a></li>
				</ul>
			</div>
		</li>
		<li class="discounts"><a href="/deals">deals</a>
			<div class="dropdown">
				<ul>
					<li><a href="/deals">Domain and Hosting Deals</a></li>
					<li><a href="/deals/mighty-deals" data-noxhr="true">Mighty Deals</a></li>
					<li><a href="/deals/tickitwickit-deals" data-noxhr="true">Tickit Wicket Deals</a></li>
				</ul>
			</div>
		</li>
		<li class="about">
			<a href="/about">david walsh</a>
			<div class="dropdown">
				<ul>
					<li><a href="/about-david-walsh">About Me</a></li>
					<li><a href="/contact">Contact Me</a></li>
					<li><a href="/mozilla">Mozilla</a></li>
					<li class="sep"></li>
					<li><a href="/feed" data-noxhr="true" rel="nofollow">RSS Feed</a></li>
					<li><a href="//twitter.com/davidwalshblog" rel="nofollow">Twitter</a></li>
					<li><a href="//facebook.com/davidwalshblog" rel="nofollow">Facebook</a></li>
					<li><a href="//plus.google.com/114538814489633467974" rel="nofollow">Google +</a></li>
					<li><a href="//linkedin.com/in/davidjameswalsh" rel="nofollow">LinkedIn</a></li>
					<li><a href="//alpha.app.net/davidwalsh" rel="nofollow">App.Net</a></li>
					<li><a href="//github.com/darkwing" rel="nofollow">GitHub</a></li>
					<li><a href="//codepen.io/darkwing" rel="nofollow">CodePen</a></li>
					<li><a href="/chat" rel="nofollow">Chat</a></li>
				</ul>
			</div>
		</li>
	</ul>

		<!-- small logo block, with search, blog title, banner ad, etc. --> 
		<section class="search"><form action="//google.com/search" id="searchForm">
			<input type="search" placeholder="Search..." name="q" id="q" accesskey="s" autocomplete="on" required />
			<input type="hidden" name="sitesearch" value="davidwalsh.name" />
		</form></section>
	</nav>
	<div class="centerSite"><a href="/" class="headerTitle">The David Walsh Blog</a></div>
	</div></header>

<!-- holds content, will be frequently changed -->
<div id="contentHolder">

	<!-- start the left section if not the homepage -->
	<section class="left">
<h1>Camera and Video Control with HTML5</h1>
<div class="p">Read <a href="http://davidwalsh.name/browser-camera" target="_top">Camera and Video Control with HTML5</a></div>
<div id="promoNode"></div>	
	<p>Using Opera Next or Chrome Canary, use this page to take your picture!</p>

	<!--
		Ideally these elements aren't created until it's confirmed that the 
		client supports video/camera, but for the sake of illustrating the 
		elements involved, they are created with markup (not JavaScript)
	-->
	<video id="video" width="640" height="480" autoplay></video>
	<button id="snap" class="sexyButton">Snap Photo</button>
	<canvas id="canvas" width="640" height="480"></canvas>

	<script>

		// Put event listeners into place
		window.addEventListener("DOMContentLoaded", function() {
			// Grab elements, create settings, etc.
			var canvas = document.getElementById("canvas"),
				context = canvas.getContext("2d"),
				video = document.getElementById("video"),
				videoObj = { "video": true },
				errBack = function(error) {
					console.log("Video capture error: ", error.code); 
				};

			// Put video listeners into place
			if(navigator.getUserMedia) { // Standard
				navigator.getUserMedia(videoObj, function(stream) {
					video.src = stream;
					video.play();
				}, errBack);
			} else if(navigator.webkitGetUserMedia) { // WebKit-prefixed
				navigator.webkitGetUserMedia(videoObj, function(stream){
					video.src = window.webkitURL.createObjectURL(stream);
					video.play();
				}, errBack);
			} else if(navigator.mozGetUserMedia) { // WebKit-prefixed
				navigator.mozGetUserMedia(videoObj, function(stream){
					video.src = window.URL.createObjectURL(stream);
					video.play();
				}, errBack);
			}

			// Trigger photo take
			document.getElementById("snap").addEventListener("click", function() {
				context.drawImage(video, 0, 0, 640, 480);
			});
		}, false);

	</script>
		
</section>

	<style>
body .one .bsa_it_ad { background: #f8f8f8; border: none; font-family: inherit; width: 200px; position: absolute; top: 0; right: 0; text-align: center; border-radius: 8px; }
body .one .bsa_it_ad .bsa_it_i { display: block; padding: 0; float: none; margin: 0 0 5px; }
body .one .bsa_it_ad .bsa_it_i img { padding: 10px; border: none; margin: 0 auto; }
body .one .bsa_it_ad .bsa_it_t { padding: 6px 0; }
body .one .bsa_it_ad .bsa_it_d { padding: 0; font-size: 12px; color: #333; }
body .one .bsa_it_p { display: none; }
body #bsap_aplink, body #bsap_aplink:hover { display: block; font-size: 10px; margin: 12px 15px 0; text-align: right; }
</style>
<script type="text/javascript" src="http://cdn.adpacks.com/adpacks.js?legacyid=1280449&zoneid=1386&key=db3b221ddd8cbba67739ae3837520ffe&serve=C6SD52Y&placement=davidwalshname&circle=dev" id="_adpacks_js"></script>

</div>

<div class="footer"><div class="centerSite">
&raquo; Back to: <a href="http://davidwalsh.name/browser-camera" target="_top">Camera and Video Control with HTML5</a>
</div></div>

<script>
window.addEventListener("load", function() {
	var s = "script",
		d = document,
		w = window,
		firstScript = d.getElementsByTagName(s)[0]

	// BSA bitches!
	var bsa = d.createElement(s);
	bsa.async = 1;
	bsa.src = "//s3.buysellads.com/ac/bsa.js";
	inject(bsa);

	// Injects an sync script
	function inject(s) {
		firstScript.parentNode.insertBefore(s, firstScript);
	}

	// Promo!
	(function() {

		var promoNode = d.getElementById("promoNode");

		// Temporary - use MooTools 2.0 when available
		function createElement(tagName, attr, parent) {
			var el = d.createElement(tagName);
			for(prop in attr) {
				if(attr.hasOwnProperty(prop)) el.setAttribute(prop, attr[prop]);
			}
			parent.appendChild(el);
			return el;
		}

		// Loads a script
		function loadScript(url) {
			var script = d.createElement("script");
			script.src = url;
			script.setAttribute("async", "true");
			d.documentElement.firstChild.appendChild(script);
		}

		// Create the Twitter widget, inject
		createElement("a", {
			href: "//twitter.com/share",
			"data-count": "horizontal",
			"class": "twitter-share-button"
		}, createElement("span", {}, promoNode));
		loadScript("http://platform.twitter.com/widgets.js");

		// Create the Google Plus icon
		var gl = createElement("g:plusone", {
			href: w.location,
			size: "medium"
		}, createElement("span", {}, promoNode));
		loadScript("//apis.google.com/js/plusone.js");
		
		// Create the Facebook widget
		createElement("iframe", {
			src: "//facebook.com/plugins/like.php?href=" + w.location,
			scrolling: "no",
			frameborder: 0,
			allowTransparency: true,
			style: "border:none; overflow:hidden; float:left; height:24px; margin-top:3px;"
		}, createElement("span", {}, promoNode));

})();
	
});
</script>
</body>
</html>